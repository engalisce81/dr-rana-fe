"use strict";(self.webpackChunkAcadmy=self.webpackChunkAcadmy||[]).push([[440],{3440:(Oe,W,a)=>{a.r(W),a.d(W,{ACCOUNT_CONFIG_OPTIONS:()=>v,ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS:()=>w,AccountExtensionsGuard:()=>ie,AccountModule:()=>je,AuthenticationFlowGuard:()=>oe,ChangePasswordComponent:()=>k,DEFAULT_ACCOUNT_FORM_PROPS:()=>j,ForgotPasswordComponent:()=>I,LoginComponent:()=>_,ManageProfileComponent:()=>$,ManageProfileStateService:()=>S,PersonalSettingsComponent:()=>O,PersonalSettingsHalfRowComponent:()=>A,RE_LOGIN_CONFIRMATION_TOKEN:()=>E,RegisterComponent:()=>D,ResetPasswordComponent:()=>G,accountConfigOptionsFactory:()=>re,accountExtensionsResolver:()=>se,authenticationFlowGuard:()=>ne,getRedirectUrl:()=>N});var r=a(3616),c=a(9862),e=a(4438),ae=a(3184),m=a(4721),u=a(430),F=function(t){return t[t.Success=1]="Success",t[t.InvalidUserNameOrPassword=2]="InvalidUserNameOrPassword",t[t.NotAllowed=3]="NotAllowed",t[t.LockedOut=4]="LockedOut",t[t.RequiresTwoFactor=5]="RequiresTwoFactor",t}(F||{});(0,r.l_2)(F);(class P{constructor(o){this.restService=o,this.apiName="AbpAccount",this.checkPasswordByLogin=n=>this.restService.request({method:"POST",url:"/api/account/check-password",body:n},{apiName:this.apiName}),this.loginByLogin=n=>this.restService.request({method:"POST",url:"/api/account/login",body:n},{apiName:this.apiName}),this.logout=()=>this.restService.request({method:"GET",url:"/api/account/logout"},{apiName:this.apiName})}static{this.\u0275fac=function(n){return new(n||P)(e.KVO(r.G9T))}}static{this.\u0275prov=e.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}});let R=(()=>{class t{constructor(o){this.restService=o,this.apiName="AbpAccount",this.register=n=>this.restService.request({method:"POST",url:"/api/account/register",body:n},{apiName:this.apiName}),this.resetPassword=n=>this.restService.request({method:"POST",url:"/api/account/reset-password",body:n},{apiName:this.apiName}),this.sendPasswordResetCode=n=>this.restService.request({method:"POST",url:"/api/account/send-password-reset-code",body:n},{apiName:this.apiName})}static{this.\u0275fac=function(n){return new(n||t)(e.KVO(r.G9T))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),T=(()=>{class t{constructor(o){this.restService=o,this.apiName="AbpAccount",this.changePassword=n=>this.restService.request({method:"POST",url:"/api/account/my-profile/change-password",body:n},{apiName:this.apiName}),this.get=()=>this.restService.request({method:"GET",url:"/api/account/my-profile"},{apiName:this.apiName}),this.update=n=>this.restService.request({method:"PUT",url:"/api/account/my-profile",body:n},{apiName:this.apiName})}static{this.\u0275fac=function(n){return new(n||t)(e.KVO(r.G9T))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var s=a(4341),h=a(980),J=a(9437),ue=a(5964),fe=a(5558),y=a(6354),B=a(8141),Q=a(8810),M=a(9969),V=a(177),p=a(5923);function be(t,l){if(1&t){const o=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.onSubmit())}),e.j41(1,"p"),e.EFF(2),e.nI1(3,"abpLocalization"),e.k0s(),e.j41(4,"div",2)(5,"label",3),e.EFF(6),e.nI1(7,"abpLocalization"),e.k0s(),e.j41(8,"span"),e.EFF(9," * "),e.k0s(),e.nrm(10,"input",4),e.k0s(),e.j41(11,"abp-button",5),e.EFF(12),e.nI1(13,"abpLocalization"),e.k0s(),e.j41(14,"a",6),e.nrm(15,"i",7),e.EFF(16),e.nI1(17,"abpLocalization"),e.k0s()()}if(2&t){const o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(2),e.JRh(e.bMT(3,7,"AbpAccount::SendPasswordResetLink_Information")),e.R7$(4),e.JRh(e.bMT(7,9,"AbpAccount::EmailAddress")),e.R7$(5),e.Y8G("loading",o.inProgress)("disabled",null==o.form?null:o.form.invalid),e.R7$(),e.SpI(" ",e.bMT(13,11,"AbpAccount::Submit")," "),e.R7$(4),e.JRh(e.bMT(17,13,"AbpAccount::Login"))}}function he(t,l){1&t&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.j41(3,"a",6)(4,"button",8),e.nrm(5,"i",7),e.EFF(6),e.nI1(7,"abpLocalization"),e.k0s()()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"AbpAccount::PasswordResetMailSentMessage")," "),e.R7$(5),e.SpI(" ",e.bMT(7,4,"AbpAccount::BackToLogin")," "))}function ge(t,l){1&t&&(e.j41(0,"strong"),e.EFF(1),e.nI1(2,"abpLocalization"),e.j41(3,"a",14),e.EFF(4),e.nI1(5,"abpLocalization"),e.k0s()()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"AbpAccount::AreYouANewUser")," "),e.R7$(3),e.JRh(e.bMT(5,4,"AbpAccount::Register")))}function ve(t,l){1&t&&(e.j41(0,"div",1)(1,"label",7),e.EFF(2),e.nI1(3,"abpLocalization"),e.k0s(),e.j41(4,"span"),e.EFF(5," * "),e.k0s(),e.nrm(6,"input",8),e.k0s()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}function Se(t,l){if(1&t){const o=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.submit())}),e.nrm(1,"abp-extensible-form",2),e.j41(2,"abp-button",3),e.EFF(3),e.nI1(4,"abpLocalization"),e.k0s()()}if(2&t){const o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("selectedRecord",o.selected),e.R7$(),e.Y8G("loading",o.inProgress),e.R7$(),e.SpI(" ",e.bMT(4,4,"AbpIdentity::Save"),"")}}const Y=t=>({active:t}),q=t=>({componentKey:t});function Ce(t,l){if(1&t){const o=e.RV6();e.j41(0,"li",10),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.selectedTab=0)}),e.j41(1,"a",8),e.EFF(2),e.nI1(3,"abpLocalization"),e.k0s()()}if(2&t){const o=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(4,Y,0===o.selectedTab)),e.R7$(),e.JRh(e.bMT(3,2,"AbpUi::ChangePassword"))}}function Ae(t,l){1&t&&e.nrm(0,"abp-change-password-form")}function we(t,l){if(1&t&&(e.j41(0,"div",11)(1,"div",12)(2,"h4"),e.EFF(3),e.nI1(4,"abpLocalization"),e.nrm(5,"hr"),e.k0s(),e.DNE(6,Ae,1,0,"abp-change-password-form",13),e.k0s()()),2&t){const o=e.XpG(2);e.Y8G("@fadeIn",void 0),e.R7$(3),e.SpI(" ",e.bMT(4,3,"AbpIdentity::ChangePassword")," "),e.R7$(3),e.Y8G("abpReplaceableTemplate",e.eq3(5,q,o.changePasswordKey))}}function Pe(t,l){1&t&&e.nrm(0,"abp-personal-settings-form")}function Fe(t,l){if(1&t&&(e.j41(0,"div",11)(1,"div",12)(2,"h4"),e.EFF(3),e.nI1(4,"abpLocalization"),e.nrm(5,"hr"),e.k0s(),e.DNE(6,Pe,1,0,"abp-personal-settings-form",13),e.k0s()()),2&t){const o=e.XpG(2);e.Y8G("@fadeIn",void 0),e.R7$(3),e.SpI(" ",e.bMT(4,3,"AbpIdentity::PersonalSettings")," "),e.R7$(3),e.Y8G("abpReplaceableTemplate",e.eq3(5,q,o.personalSettingsKey))}}function Re(t,l){if(1&t&&(e.j41(0,"div",9),e.DNE(1,we,7,7,"div",11)(2,Fe,7,7,"div",11),e.k0s()),2&t){const o=e.XpG();e.R7$(),e.vxM(0===o.selectedTab?1:-1),e.R7$(),e.vxM(1===o.selectedTab?2:-1)}}function Te(t,l){if(1&t){const o=e.RV6();e.j41(0,"form",2),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.onSubmit())}),e.j41(1,"div",3)(2,"label",4),e.EFF(3),e.nI1(4,"abpLocalization"),e.k0s(),e.j41(5,"span"),e.EFF(6," * "),e.k0s(),e.nrm(7,"input",5),e.k0s(),e.j41(8,"div",3)(9,"label",6),e.EFF(10),e.nI1(11,"abpLocalization"),e.k0s(),e.j41(12,"span"),e.EFF(13," * "),e.k0s(),e.nrm(14,"input",7),e.k0s(),e.j41(15,"div",3)(16,"label",8),e.EFF(17),e.nI1(18,"abpLocalization"),e.k0s(),e.j41(19,"span"),e.EFF(20," * "),e.k0s(),e.nrm(21,"input",9),e.k0s(),e.j41(22,"abp-button",10),e.EFF(23),e.nI1(24,"abpLocalization"),e.k0s()()}if(2&t){const o=e.XpG();e.Y8G("formGroup",o.form),e.R7$(3),e.JRh(e.bMT(4,6,"AbpAccount::UserName")),e.R7$(7),e.JRh(e.bMT(11,8,"AbpAccount::EmailAddress")),e.R7$(7),e.JRh(e.bMT(18,10,"AbpAccount::Password")),e.R7$(5),e.Y8G("loading",o.inProgress),e.R7$(),e.SpI(" ",e.bMT(24,12,"AbpAccount::Register")," ")}}function ye(t,l){if(1&t){const o=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.onSubmit())}),e.j41(1,"p"),e.EFF(2),e.nI1(3,"abpLocalization"),e.k0s(),e.j41(4,"div",2)(5,"label",3),e.EFF(6),e.nI1(7,"abpLocalization"),e.k0s(),e.j41(8,"span"),e.EFF(9," * "),e.k0s(),e.nrm(10,"input",4),e.k0s(),e.j41(11,"div",2)(12,"label",5),e.EFF(13),e.nI1(14,"abpLocalization"),e.k0s(),e.j41(15,"span"),e.EFF(16," * "),e.k0s(),e.nrm(17,"input",6),e.k0s(),e.j41(18,"button",7),e.EFF(19),e.nI1(20,"abpLocalization"),e.k0s(),e.j41(21,"abp-button",8),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.onSubmit())}),e.EFF(22),e.nI1(23,"abpLocalization"),e.k0s()()}if(2&t){const o=e.XpG();e.Y8G("formGroup",o.form)("mapErrorsFn",o.mapErrorsFn),e.R7$(2),e.JRh(e.bMT(3,8,"AbpAccount::ResetPassword_Information")),e.R7$(4),e.JRh(e.bMT(7,10,"AbpAccount::Password")),e.R7$(7),e.JRh(e.bMT(14,12,"AbpAccount::ConfirmPassword")),e.R7$(6),e.SpI(" ",e.bMT(20,14,"AbpAccount::Cancel")," "),e.R7$(2),e.Y8G("loading",o.inProgress),e.R7$(),e.SpI(" ",e.bMT(23,16,"AbpAccount::Submit")," ")}}function Me(t,l){1&t&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.j41(3,"a",9)(4,"button",10),e.EFF(5),e.nI1(6,"abpLocalization"),e.k0s()()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,2,"AbpAccount::YourPasswordIsSuccessfullyReset")," "),e.R7$(4),e.SpI(" ",e.bMT(6,4,"AbpAccount::BackToLogin")," "))}let I=(()=>{class t{constructor(o,n){this.fb=o,this.accountService=n,this.isEmailSent=!1,this.form=this.fb.group({email:["",[s.k0.required,s.k0.email]]})}onSubmit(){this.form.invalid||(this.inProgress=!0,this.accountService.sendPasswordResetCode({email:this.form.get("email")?.value,appName:"Angular"}).pipe((0,h.j)(()=>this.inProgress=!1)).subscribe(()=>{this.isEmailSent=!0}))}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(s.ze),e.rXU(R))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-forgot-password"]],standalone:!1,decls:5,vars:4,consts:[["validateOnSubmit","",3,"formGroup"],["validateOnSubmit","",3,"ngSubmit","formGroup"],[1,"mb-3","form-group"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["buttonClass","mt-2 mb-3 btn btn-primary btn-block","buttonType","submit",1,"d-block",3,"loading","disabled"],["routerLink","/account/login"],["aria-hidden","true",1,"fa","fa-long-arrow-left","me-1"],[1,"d-block","mt-2","mb-3","btn","btn-primary","btn-block"]],template:function(n,i){1&n&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.DNE(3,be,18,15,"form",0)(4,he,8,6)),2&n&&(e.R7$(),e.JRh(e.bMT(2,2,"AbpAccount::ForgotPassword")),e.R7$(2),e.vxM(i.isEmailSent?4:3))},dependencies:[s.qT,s.me,s.BC,s.cb,s.j4,s.JD,u.Wk,r.S02,m.a5,m.lt,c.Qp,r.aM3],encapsulation:2})}}return t})();const v=new e.nKC("ACCOUNT_CONFIG_OPTIONS");function N(t){const l=t.get(u.nX),o=t.get(v);return l.snapshot.queryParams.returnUrl||o.redirectUrl||"/"}const{maxLength:K,required:Z}=s.k0;let _=(()=>{class t{constructor(){this.injector=(0,e.WQX)(e.zZn),this.fb=(0,e.WQX)(s.ze),this.toasterService=(0,e.WQX)(c.W9),this.authService=(0,e.WQX)(r.uRZ),this.configState=(0,e.WQX)(r.d14),this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase()}buildForm(){this.form=this.fb.group({username:["",[Z,K(255)]],password:["",[Z,K(128)]],rememberMe:[!1]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const{username:o,password:n,rememberMe:i}=this.form.value,d=N(this.injector);this.authService.login({username:o,password:n,rememberMe:i,redirectUrl:d}).pipe((0,J.W)(f=>(this.toasterService.error(f.error?.error_description||f.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),(0,Q.$)(f))),(0,h.j)(()=>this.inProgress=!1)).subscribe()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-login"]],standalone:!1,decls:29,vars:21,consts:[["validateOnSubmit","",1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3","form-group"],["for","login-input-user-name-or-email-address",1,"form-label"],["type","text","id","login-input-user-name-or-email-address","formControlName","username","autocomplete","username","autofocus","",1,"form-control"],["for","login-input-password",1,"form-label"],["type","password","id","login-input-password","formControlName","password","autocomplete","current-password",1,"form-control"],[1,"row"],[1,"col"],[1,"form-check"],["for","login-input-remember-me",1,"form-check-label","mb-2"],["type","checkbox","id","login-input-remember-me","formControlName","rememberMe",1,"form-check-input"],[1,"text-end","col"],["routerLink","/account/forgot-password"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"],["routerLink","/account/register","queryParamsHandling","preserve",1,"text-decoration-none"]],template:function(n,i){1&n&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.DNE(3,ge,6,6,"strong"),e.j41(4,"form",0),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(5,"div",1)(6,"label",2),e.EFF(7),e.nI1(8,"abpLocalization"),e.k0s(),e.nrm(9,"input",3),e.k0s(),e.j41(10,"div",1)(11,"label",4),e.EFF(12),e.nI1(13,"abpLocalization"),e.k0s(),e.nrm(14,"input",5),e.k0s(),e.j41(15,"div",6)(16,"div",7)(17,"div",8)(18,"label",9),e.nrm(19,"input",10),e.EFF(20),e.nI1(21,"abpLocalization"),e.k0s()()(),e.j41(22,"div",11)(23,"a",12),e.EFF(24),e.nI1(25,"abpLocalization"),e.k0s()()(),e.j41(26,"abp-button",13),e.EFF(27),e.nI1(28,"abpLocalization"),e.k0s()()),2&n&&(e.R7$(),e.JRh(e.bMT(2,9,"AbpAccount::Login")),e.R7$(2),e.vxM(i.isSelfRegistrationEnabled?3:-1),e.R7$(),e.Y8G("formGroup",i.form),e.R7$(3),e.JRh(e.bMT(8,11,"AbpAccount::UserNameOrEmailAddress")),e.R7$(5),e.JRh(e.bMT(13,13,"AbpAccount::Password")),e.R7$(8),e.SpI(" ",e.bMT(21,15,"AbpAccount::RememberMe")," "),e.R7$(4),e.JRh(e.bMT(25,17,"AbpAccount::ForgotPassword")),e.R7$(2),e.Y8G("loading",i.inProgress),e.R7$(),e.SpI(" ",e.bMT(28,19,"AbpAccount::Login")," "))},dependencies:[s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD,u.Wk,r.B7c,r.S02,m.a5,m.lt,c.Qp,r.aM3],encapsulation:2})}}return t})(),S=(()=>{class t{constructor(){this.store=new r.JG$({})}get createOnUpdateStream(){return this.store.sliceUpdate}getProfile$(){return this.store.sliceState(o=>o.profile)}getProfile(){return this.store.state.profile}setProfile(o){this.store.patch({profile:o})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const{required:C}=s.k0,H=["newPassword","repeatNewPassword"];let k=(()=>{class t{constructor(o,n,i,d,f){this.fb=o,this.injector=n,this.toasterService=i,this.profileService=d,this.manageProfileState=f,this.mapErrorsFn=(b,z,X)=>H.indexOf(String(X?.name))<0?b:b.concat(z.filter(({key:x})=>"passwordMismatch"===x))}ngOnInit(){this.hideCurrentPassword=!this.manageProfileState.getProfile()?.hasPassword;const o=(0,c.kl)(this.injector);this.form=this.fb.group({password:["",C],newPassword:["",{validators:[C,...o]}],repeatNewPassword:["",{validators:[C,...o]}]},{validators:[(0,m.CF)(H)]}),this.hideCurrentPassword&&this.form.removeControl("password")}onSubmit(){this.form.invalid||(this.inProgress=!0,this.profileService.changePassword({...!this.hideCurrentPassword&&{currentPassword:this.form.get("password")?.value},newPassword:this.form.get("newPassword")?.value}).pipe((0,h.j)(()=>this.inProgress=!1)).subscribe({next:()=>{this.form.reset(),this.toasterService.success("AbpAccount::PasswordChangedMessage","",{life:5e3}),this.hideCurrentPassword&&(this.hideCurrentPassword=!1,this.form.addControl("password",new s.hs("",[C])))},error:o=>{this.toasterService.error(o.error?.error?.message||"AbpAccount::DefaultErrorMessage")}}))}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(s.ze),e.rXU(e.zZn),e.rXU(c.W9),e.rXU(T),e.rXU(S))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],standalone:!1,decls:19,vars:14,consts:[["validateOnSubmit","",1,"abp-md-form",3,"ngSubmit","formGroup","mapErrorsFn"],[1,"mb-3","form-group"],["for","new-password",1,"form-label"],["type","password","id","new-password","formControlName","newPassword","autocomplete","new-password",1,"form-control"],["for","confirm-new-password",1,"form-label"],["type","password","id","confirm-new-password","formControlName","repeatNewPassword","autocomplete","new-password",1,"form-control"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",3,"loading","disabled"],["for","current-password",1,"form-label"],["type","password","id","current-password","formControlName","password","autofocus","","autocomplete","current-password",1,"form-control"]],template:function(n,i){1&n&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.DNE(1,ve,7,3,"div",1),e.j41(2,"div",1)(3,"label",2),e.EFF(4),e.nI1(5,"abpLocalization"),e.k0s(),e.j41(6,"span"),e.EFF(7," * "),e.k0s(),e.nrm(8,"input",3),e.k0s(),e.j41(9,"div",1)(10,"label",4),e.EFF(11),e.nI1(12,"abpLocalization"),e.k0s(),e.j41(13,"span"),e.EFF(14," * "),e.k0s(),e.nrm(15,"input",5),e.k0s(),e.j41(16,"abp-button",6),e.EFF(17),e.nI1(18,"abpLocalization"),e.k0s()()),2&n&&(e.Y8G("formGroup",i.form)("mapErrorsFn",i.mapErrorsFn),e.R7$(),e.vxM(i.hideCurrentPassword?-1:1),e.R7$(3),e.JRh(e.bMT(5,8,"AbpIdentity::DisplayName:NewPassword")),e.R7$(7),e.JRh(e.bMT(12,10,"AbpIdentity::DisplayName:NewPasswordConfirm")),e.R7$(5),e.Y8G("loading",i.inProgress)("disabled",null==i.form?null:i.form.invalid),e.R7$(),e.JRh(e.bMT(18,12,"AbpIdentity::Save")))},dependencies:[s.qT,s.me,s.BC,s.cb,s.j4,s.JD,r.B7c,r.S02,m.a5,m.lt,c.Qp,r.aM3],encapsulation:2})}}return t})();const E=new e.nKC("RE_LOGIN_CONFIRMATION_TOKEN");let A=(()=>{class t{constructor(o){this.propData=o,this.displayName=o.displayName,this.name=o.name,this.id=o.id||""}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(p.MW))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-personal-settings-half-row"]],standalone:!1,features:[e.Jv_([],[p.P4])],decls:5,vars:7,consts:[[1,"w-50","d-inline"],[1,"form-label"],["type","text",1,"form-control",3,"formControlName"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"label",1),e.EFF(2),e.nI1(3,"abpLocalization"),e.k0s(),e.nrm(4,"input",2),e.k0s()),2&n&&(e.R7$(),e.BMQ("for",i.name),e.R7$(),e.SpI("",e.bMT(3,5,i.displayName)," "),e.R7$(2),e.Y8G("formControlName",i.name),e.BMQ("id",i.id)("name",i.name))},dependencies:[s.me,s.BC,s.JD,m.lt,r.aM3],encapsulation:2})}}return t})();const{maxLength:g,required:ee,email:Ie}=s.k0,j={"Account.PersonalSettingsComponent":p.UW.createMany([{type:"string",name:"userName",displayName:"AbpIdentity::DisplayName:UserName",id:"username",validators:()=>[ee,g(256)]},{type:"string",name:"name",displayName:"AbpIdentity::DisplayName:Name",id:"name",validators:()=>[g(64)],template:A,className:"d-inline-block w-50"},{type:"string",name:"surname",displayName:"AbpIdentity::DisplayName:Surname",id:"surname",validators:()=>[g(64)],className:"d-inline-block w-50 ps-4",template:A},{type:"string",name:"email",displayName:"AbpIdentity::DisplayName:Email",id:"email-address",validators:()=>[ee,Ie,g(256)]},{type:"string",name:"phoneNumber",displayName:"AbpIdentity::DisplayName:PhoneNumber",id:"phone-number",validators:()=>[g(16)]}])},w=new e.nKC("ACCOUNT_EDIT_FORM_PROP_CONTRIBUTORS");let O=(()=>{class t{constructor(){this.fb=(0,e.WQX)(s.ze),this.toasterService=(0,e.WQX)(c.W9),this.profileService=(0,e.WQX)(T),this.manageProfileState=(0,e.WQX)(S),this.authService=(0,e.WQX)(r.uRZ),this.confirmationService=(0,e.WQX)(c.td),this.configState=(0,e.WQX)(r.d14),this.isPersonalSettingsChangedConfirmationActive=(0,e.WQX)(E),this.injector=(0,e.WQX)(e.zZn),this.logoutConfirmation=()=>{this.authService.logout().subscribe()}}buildForm(){if(this.selected=this.manageProfileState.getProfile(),!this.selected)return;const o=new p.a9(this.injector,this.selected);this.form=(0,p.uB)(o)}ngOnInit(){this.buildForm()}submit(){if(this.form.invalid)return;const o=this.isLogoutConfirmMessageActive(),n=this.authService.getRefreshToken();this.inProgress=!0,this.profileService.update(this.form.value).pipe((0,h.j)(()=>this.inProgress=!1)).subscribe(i=>{if(this.manageProfileState.setProfile(i),this.configState.refreshAppState(),this.toasterService.success("AbpAccount::PersonalSettingsSaved","Success",{life:5e3}),n)return this.authService.refreshToken();o&&this.showLogoutConfirmMessage()})}isLogoutConfirmMessageActive(){return this.isPersonalSettingsChangedConfirmationActive}showLogoutConfirmMessage(){this.confirmationService.info("AbpAccount::PersonalSettingsChangedConfirmationModalDescription","AbpAccount::PersonalSettingsChangedConfirmationModalTitle").pipe((0,ue.p)(o=>o===c.m.Status.confirm)).subscribe(this.logoutConfirmation)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-personal-settings-form"]],exportAs:["abpPersonalSettingsForm"],standalone:!1,features:[e.Jv_([{provide:p.JF,useValue:"Account.PersonalSettingsComponent"}])],decls:1,vars:1,consts:[["validateOnSubmit","",1,"abp-md-form",3,"formGroup"],["validateOnSubmit","",1,"abp-md-form",3,"ngSubmit","formGroup"],[3,"selectedRecord"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"loading"]],template:function(n,i){1&n&&e.DNE(0,Se,5,6,"form",0),2&n&&e.vxM(i.form?0:-1)},dependencies:[s.qT,s.cb,s.j4,r.S02,m.a5,c.Qp,p.X3,r.aM3],encapsulation:2})}}return t})(),$=(()=>{class t{constructor(o,n){this.profileService=o,this.manageProfileState=n,this.selectedTab=0,this.changePasswordKey="Account.ChangePasswordComponent",this.personalSettingsKey="Account.PersonalSettingsComponent",this.profile$=this.manageProfileState.getProfile$()}ngOnInit(){this.profileService.get().subscribe(o=>{this.manageProfileState.setProfile(o),o.isExternal&&(this.hideChangePasswordTab=!0,this.selectedTab=1)})}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(T),e.rXU(S))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-manage-profile"]],standalone:!1,decls:15,vars:15,consts:[["id","AbpContentToolbar"],[1,"card","border-0","shadow-sm","min-h-400",3,"abpLoading"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],[1,"nav-item"],[1,"nav-item","mb-2",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],[1,"col-12","col-md-9"],[1,"nav-item",3,"click"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"],[4,"abpReplaceableTemplate"]],template:function(n,i){if(1&n&&(e.nrm(0,"div",0),e.j41(1,"div",1),e.nI1(2,"async"),e.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"ul",5),e.DNE(7,Ce,4,6,"li",6),e.nI1(8,"async"),e.j41(9,"li",7),e.bIt("click",function(){return i.selectedTab=1}),e.j41(10,"a",8),e.EFF(11),e.nI1(12,"abpLocalization"),e.k0s()()()(),e.DNE(13,Re,3,2,"div",9),e.nI1(14,"async"),e.k0s()()()),2&n){let d;e.R7$(),e.Y8G("abpLoading",!(null!=(d=e.bMT(2,5,i.profile$))&&d.userName)),e.R7$(6),e.vxM(!i.hideChangePasswordTab&&e.bMT(8,7,i.profile$)?7:-1),e.R7$(3),e.Y8G("ngClass",e.eq3(13,Y,1===i.selectedTab)),e.R7$(),e.JRh(e.bMT(12,9,"AbpAccount::PersonalSettings")),e.R7$(2),e.vxM(e.bMT(14,11,i.profile$)?13:-1)}},dependencies:[V.YU,r.y98,c.GY,k,O,V.Jj,r.aM3],styles:[".min-h-400[_ngcontent-%COMP%]{min-height:400px}"],data:{animation:[(0,M.hZ)("fadeIn",[(0,M.kY)(":enter",(0,M.sM)(c.qG))])]}})}}return t})();const{maxLength:Ne,required:L,email:_e}=s.k0;let D=(()=>{class t{constructor(o,n,i,d,f,b){this.fb=o,this.accountService=n,this.configState=i,this.toasterService=d,this.authService=f,this.injector=b,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}ngOnInit(){this.init(),this.buildForm()}init(){this.isSelfRegistrationEnabled="false"!==(this.configState.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase(),this.isSelfRegistrationEnabled||this.toasterService.warn({key:"AbpAccount::SelfRegistrationDisabledMessage",defaultValue:"Self registration is disabled."},"",{life:1e4})}buildForm(){this.form=this.fb.group({username:["",[L,Ne(255)]],password:["",[L,...(0,c.kl)(this.injector)]],email:["",[L,_e]]})}onSubmit(){if(this.form.invalid)return;this.inProgress=!0;const o={userName:this.form.get("username")?.value,password:this.form.get("password")?.value,emailAddress:this.form.get("email")?.value,appName:"Angular"};this.accountService.register(o).pipe((0,fe.n)(()=>this.authService.login({username:o.userName,password:o.password,redirectUrl:N(this.injector)})),(0,J.W)(n=>(this.toasterService.error(n.error?.error_description||n.error?.error.message||"AbpAccount::DefaultErrorMessage","",{life:7e3}),(0,Q.$)(n))),(0,h.j)(()=>this.inProgress=!1)).subscribe()}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(s.ze),e.rXU(R),e.rXU(r.d14),e.rXU(c.W9),e.rXU(r.uRZ),e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-register"]],standalone:!1,decls:10,vars:10,consts:[["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","",1,"mt-4",3,"formGroup"],["validateOnSubmit","",1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3","form-group"],["for","input-user-name",1,"form-label"],["autofocus","","type","text","id","input-user-name","formControlName","username","autocomplete","username",1,"form-control"],["for","input-email-address",1,"form-label"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"]],template:function(n,i){1&n&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.j41(3,"strong"),e.EFF(4),e.nI1(5,"abpLocalization"),e.j41(6,"a",0),e.EFF(7),e.nI1(8,"abpLocalization"),e.k0s()(),e.DNE(9,Te,25,14,"form",1)),2&n&&(e.R7$(),e.JRh(e.bMT(2,4,"AbpAccount::Register")),e.R7$(3),e.SpI(" ",e.bMT(5,6,"AbpAccount::AlreadyRegistered")," "),e.R7$(3),e.JRh(e.bMT(8,8,"AbpAccount::Login")),e.R7$(2),e.vxM(i.isSelfRegistrationEnabled?9:-1))},dependencies:[s.qT,s.me,s.BC,s.cb,s.j4,s.JD,u.Wk,r.B7c,r.S02,m.a5,m.lt,c.Qp,r.aM3],encapsulation:2})}}return t})();const te=["password","confirmPassword"];let G=(()=>{class t{constructor(o,n,i,d,f){this.fb=o,this.accountService=n,this.route=i,this.router=d,this.injector=f,this.inProgress=!1,this.isPasswordReset=!1,this.mapErrorsFn=(b,z,X)=>te.indexOf(String(X?.name))<0?b:b.concat(z.filter(({key:x})=>"passwordMismatch"===x))}ngOnInit(){this.route.queryParams.subscribe(({userId:o,resetToken:n})=>{(!o||!n)&&this.router.navigateByUrl("/account/login"),this.form=this.fb.group({userId:[o,[s.k0.required]],resetToken:[n,[s.k0.required]],password:["",[s.k0.required,...(0,c.kl)(this.injector)]],confirmPassword:["",[s.k0.required,...(0,c.kl)(this.injector)]]},{validators:[(0,m.CF)(te)]})})}onSubmit(){this.form.invalid||this.inProgress||(this.inProgress=!0,this.accountService.resetPassword({userId:this.form.get("userId")?.value,resetToken:this.form.get("resetToken")?.value,password:this.form.get("password")?.value}).pipe((0,h.j)(()=>this.inProgress=!1)).subscribe(()=>{this.isPasswordReset=!0}))}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(s.ze),e.rXU(R),e.rXU(u.nX),e.rXU(u.Ix),e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-reset-password"]],standalone:!1,decls:5,vars:4,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn"],["validateOnSubmit","",3,"ngSubmit","formGroup","mapErrorsFn"],[1,"mb-3","form-group"],["for","input-password",1,"form-label"],["type","password","id","input-password","formControlName","password",1,"form-control"],["for","input-confirm-password",1,"form-label"],["type","password","id","input-confirm-password","formControlName","confirmPassword",1,"form-control"],["type","button","routerLink","/account/login",1,"me-2","btn","btn-outline-primary"],["buttonType","submit","buttonClass","me-2 btn btn-primary",3,"click","loading"],["routerLink","/account/login"],[1,"d-block","mt-2","mb-3","btn","btn-primary"]],template:function(n,i){1&n&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.DNE(3,ye,24,18,"form",0)(4,Me,7,6)),2&n&&(e.R7$(),e.JRh(e.bMT(2,2,"AbpAccount::ResetPassword")),e.R7$(2),e.vxM(i.isPasswordReset?4:3))},dependencies:[s.qT,s.me,s.BC,s.cb,s.j4,s.JD,u.Wk,r.S02,m.a5,m.lt,c.Qp,r.aM3],encapsulation:2})}}return t})(),oe=(()=>{class t{constructor(){this.authService=(0,e.WQX)(r.uRZ)}canActivate(){return!!this.authService.isInternalAuth||(this.authService.navigateToLogin(),!1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac})}}return t})();const ne=()=>{const t=(0,e.WQX)(r.uRZ);return!!t.isInternalAuth||(t.navigateToLogin(),!1)};let ie=(()=>{class t{constructor(){this.injector=(0,e.WQX)(e.zZn),this.extensions=(0,e.WQX)(p.yJ)}canActivate(){const n=(0,e.WQX)(w,{optional:!0})||{};return(0,p.Nl)(this.injector,"Identity").pipe((0,y.T)(i=>({"Account.PersonalSettingsComponent":i.User})),(0,p.p2)(this.injector,"AbpIdentity"),(0,B.M)(i=>{(0,p.ah)(this.extensions.editFormProps,j,i.editForm,n)}),(0,y.T)(()=>!0))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac})}}return t})();const se=()=>{const t=(0,e.WQX)(e.zZn),l=(0,e.WQX)(p.yJ),n=(0,e.WQX)(w,{optional:!0})||{};return(0,p.Nl)(t,"Identity").pipe((0,y.T)(i=>({"Account.PersonalSettingsComponent":i.User})),(0,p.p2)(t,"AbpIdentity"),(0,B.M)(i=>{(0,p.ah)(l.editFormProps,j,i.editForm,n)}))},U=[ne],ke=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:r.Cs_,children:[{path:"login",component:r.yFO,canActivate:U,data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:_}},title:"AbpAccount::Login"},{path:"register",component:r.yFO,canActivate:U,data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:D}},title:"AbpAccount::Register"},{path:"forgot-password",component:r.yFO,canActivate:U,data:{replaceableComponent:{key:"Account.ForgotPasswordComponent",defaultComponent:I}},title:"AbpAccount::ForgotPassword"},{path:"reset-password",component:r.yFO,canActivate:[],data:{tenantBoxVisible:!1,replaceableComponent:{key:"Account.ResetPasswordComponent",defaultComponent:G}},title:"AbpAccount::ResetPassword"},{path:"manage",component:r.yFO,canActivate:[r.W_R],resolve:[se],data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:$}},title:"AbpAccount::MyAccount"}]}];let Ee=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(ke),u.iI]})}}return t})();function re(t){return{redirectUrl:"/",...t}}let je=(()=>{class t{static forChild(o={}){return{ngModule:t,providers:[oe,{provide:v,useValue:o},{provide:"ACCOUNT_OPTIONS",useFactory:re,deps:[v]},{provide:E,useValue:o.isPersonalSettingsChangedConfirmationActive??!0},{provide:w,useValue:o.editFormPropContributors},ie]}}static forLazy(o={}){return new r.l37(t.forChild(o))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[r.Ui,Ee,c.Ts,ae.zH,m.fs,p.U9]})}}return t})()}}]);