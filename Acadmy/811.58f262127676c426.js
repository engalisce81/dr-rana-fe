"use strict";(self.webpackChunkAcadmy=self.webpackChunkAcadmy||[]).push([[811],{3811:(Q,_,b)=>{b.r(_),b.d(_,{SubjectModule:()=>K});var v=b(177),p=b(430),r=b(4341),e=b(4438),j=b(5794);const f=n=>["/subjects/view",n],F=n=>["/subjects/update",n],C=()=>[],k=(n,s)=>s.id;function S(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",1)(1,"p"),e.EFF(2,"Are you sure you want to delete "),e.j41(3,"strong"),e.EFF(4),e.k0s(),e.EFF(5,"?"),e.k0s(),e.j41(6,"div",9)(7,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelDelete())}),e.EFF(8,"No"),e.k0s(),e.j41(9,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSubject())}),e.EFF(10,"Yes"),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(4),e.JRh(t.subjectToDelete.name)}}function E(n,s){1&n&&(e.j41(0,"div",8)(1,"p",12),e.EFF(2,"Loading..."),e.k0s()())}function L(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td",16)(10,"button",17),e.nrm(11,"i",18),e.k0s(),e.j41(12,"button",19),e.nrm(13,"i",20),e.k0s(),e.j41(14,"button",21),e.bIt("click",function(){const i=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.confirmDelete(i))}),e.nrm(15,"i",22),e.k0s()()()}if(2&n){const t=s.$implicit,o=s.$index,i=e.XpG(3);e.R7$(2),e.JRh((i.pageIndex-1)*i.pageSize+o+1),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.termName),e.R7$(2),e.JRh(t.gradeLevelName),e.R7$(2),e.Y8G("routerLink",e.eq3(6,f,t.id)),e.R7$(2),e.Y8G("routerLink",e.eq3(8,F,t.id))}}function I(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"button",26),e.bIt("click",function(){const i=e.eBV(t).index,l=e.XpG(4);return e.Njj(l.onPageChange(i+1))}),e.EFF(2),e.k0s(),e.bVm()}if(2&n){const t=s.index,o=e.XpG(4);e.R7$(),e.AVh("active",o.pageIndex===t+1),e.R7$(),e.SpI(" ",t+1," ")}}function R(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",15)(1,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.onPageChange(i.pageIndex-1))}),e.EFF(2," Previous "),e.k0s(),e.DNE(3,I,3,3,"ng-container",24),e.j41(4,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.onPageChange(i.pageIndex+1))}),e.EFF(5," Next "),e.k0s()()}if(2&n){const t=e.XpG(3);e.R7$(),e.Y8G("disabled",1===t.pageIndex),e.R7$(2),e.Y8G("ngForOf",e.lJ4(3,C).constructor(t.totalPages)),e.R7$(),e.Y8G("disabled",t.pageIndex===t.totalPages)}}function T(n,s){if(1&n&&(e.j41(0,"table",14)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"#"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Name"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Term"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Grade Level"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Actions"),e.k0s()()(),e.j41(13,"tbody"),e.Z7z(14,L,16,10,"tr",null,k),e.k0s()(),e.DNE(16,R,6,4,"div",15)),2&n){const t=e.XpG(2);e.R7$(14),e.Dyx(t.subjects),e.R7$(2),e.vxM(t.totalCount>t.pageSize?16:-1)}}function $(n,s){1&n&&(e.j41(0,"div",13)(1,"p"),e.EFF(2,"No subjects found."),e.k0s()())}function y(n,s){if(1&n&&e.DNE(0,T,17,1)(1,$,3,0,"div",13),2&n){const t=e.XpG();e.vxM(t.subjects.length>0?0:1)}}let D=(()=>{class n{constructor(t,o){this.subjectService=t,this.router=o,this.subjects=[],this.loading=!1,this.search="",this.totalCount=0,this.pageSize=10,this.pageIndex=1,this.showDeleteConfirm=!1}ngOnInit(){this.loadSubjects()}loadSubjects(){this.loading=!0,this.subjectService.getList(this.pageIndex,this.pageSize,this.search).subscribe({next:t=>{this.subjects=t.items,this.totalCount=t.totalCount,this.loading=!1},error:()=>{this.loading=!1}})}onSearchChange(){this.pageIndex=1,this.loadSubjects()}onPageChange(t){this.pageIndex=t,this.loadSubjects()}confirmDelete(t){this.subjectToDelete=t,this.showDeleteConfirm=!0}cancelDelete(){this.showDeleteConfirm=!1,this.subjectToDelete=null}deleteSubject(){this.subjectToDelete&&this.subjectService.delete(this.subjectToDelete.id).subscribe({next:()=>{this.loadSubjects(),this.showDeleteConfirm=!1,this.subjectToDelete=null},error:t=>{console.error("Failed to delete subject:",t),this.showDeleteConfirm=!1,this.subjectToDelete=null}})}get totalPages(){return Math.ceil(this.totalCount/this.pageSize)}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(j.M),e.rXU(p.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-list-subject"]],decls:11,vars:4,consts:[[1,"list-container",2,"width","100%"],[1,"delete-confirm-card"],[1,"toolbar"],["type","text","placeholder","Search subjects...",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],["title","Search",1,"btn","btn-search",3,"click"],[1,"bi","bi-search"],["routerLink","/subjects/create","title","Create",1,"btn","btn-success"],[1,"bi","bi-plus-circle","me-1"],[1,"loading-container"],[1,"delete-confirm-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"loading-text"],[1,"no-data-message"],[1,"table",2,"width","100%"],[1,"pagination"],[1,"actions"],["title","View",1,"btn","btn-view",3,"routerLink"],[1,"bi","bi-eye"],["title","Edit",1,"btn","btn-edit",3,"routerLink"],[1,"bi","bi-pencil"],["title","Delete",1,"btn","btn-delete",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-previous",3,"click","disabled"],[4,"ngFor","ngForOf"],[1,"btn","btn-next",3,"click","disabled"],[1,"btn","btn-page",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.DNE(1,S,11,1,"div",1),e.j41(2,"div",2)(3,"input",3),e.mxI("ngModelChange",function(a){return e.DH7(i.search,a)||(i.search=a),a}),e.bIt("keyup.enter",function(){return i.onSearchChange()}),e.k0s(),e.j41(4,"button",4),e.bIt("click",function(){return i.onSearchChange()}),e.nrm(5,"i",5),e.k0s(),e.j41(6,"button",6),e.nrm(7,"i",7),e.EFF(8," Create "),e.k0s()(),e.DNE(9,E,3,0,"div",8)(10,y,2,1),e.k0s()),2&o&&(e.R7$(),e.vxM(i.showDeleteConfirm?1:-1),e.R7$(2),e.R50("ngModel",i.search),e.R7$(6),e.vxM(i.loading?9:-1),e.R7$(),e.vxM(i.loading?-1:10))},dependencies:[r.YN,r.me,r.BC,r.vS,p.Wk],encapsulation:2})}}return n})();var h=b(99);function G(n,s){1&n&&(e.j41(0,"div",9),e.EFF(1," Subject name is required "),e.k0s())}function x(n,s){if(1&n&&(e.j41(0,"option",13),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function N(n,s){1&n&&(e.j41(0,"div",9),e.EFF(1," Term is required "),e.k0s())}function M(n,s){if(1&n&&(e.j41(0,"option",13),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function U(n,s){1&n&&(e.j41(0,"div",9),e.EFF(1," Grade Level is required "),e.k0s())}function X(n,s){1&n&&(e.nrm(0,"span",20),e.EFF(1," Creating... "))}function V(n,s){1&n&&e.EFF(0," Create Subject ")}function w(n,s){1&n&&(e.j41(0,"div",19)(1,"div",21),e.EFF(2,"Processing..."),e.k0s()())}const g=(n,s)=>s.id;function B(n,s){1&n&&(e.j41(0,"div",9),e.EFF(1,"Subject name is required"),e.k0s())}function z(n,s){if(1&n&&(e.j41(0,"option",13),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function J(n,s){1&n&&(e.j41(0,"div",9),e.EFF(1,"Term is required"),e.k0s())}function A(n,s){if(1&n&&(e.j41(0,"option",13),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function q(n,s){1&n&&(e.j41(0,"div",9),e.EFF(1,"Grade Level is required"),e.k0s())}function P(n,s){1&n&&(e.nrm(0,"span",20),e.EFF(1," Updating... "))}function Z(n,s){1&n&&e.EFF(0," Update Subject ")}function O(n,s){1&n&&(e.j41(0,"div",19)(1,"div",21),e.EFF(2,"Processing..."),e.k0s()())}const H=[{path:"",pathMatch:"full",component:D},{path:"create",pathMatch:"full",component:(()=>{class n{constructor(t,o,i,l){this.fb=t,this.subjectService=o,this.gollegeService=i,this.router=l,this.loading=!1,this.terms=[],this.gradeLevels=[],this.subjectForm=this.fb.group({name:["",r.k0.required],termId:["",r.k0.required],gradeLevelId:["",r.k0.required]})}ngOnInit(){this.loadLookups()}loadLookups(){this.gollegeService.getTermList().subscribe({next:t=>this.terms=t.items,error:t=>console.error("Error loading terms",t)}),this.gollegeService.getGradeLevelList("3a1ca04e-c99e-70f6-a15e-190f320e8114").subscribe({next:t=>this.gradeLevels=t.items,error:t=>console.error("Error loading grade levels",t)})}submit(){if(this.subjectForm.invalid)return;const t=this.subjectForm.value;this.loading=!0,this.subjectService.create(t).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/subjects"])},error:o=>{this.loading=!1,alert("Error: "+o.message)}})}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(r.ok),e.rXU(j.M),e.rXU(h.Z),e.rXU(p.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-create-subject"]],decls:43,vars:14,consts:[[1,"create-container"],[1,"header"],["type","button","routerLink","/subjects",1,"btn","btn-secondary"],[1,"subject-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Enter subject name",1,"form-control"],[1,"error-message"],["for","termId"],["id","termId","formControlName","termId",1,"form-control"],["value",""],[3,"value"],["for","gradeLevelId"],["id","gradeLevelId","formControlName","gradeLevelId",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/subjects",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading-overlay"],[1,"spinner"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Create New Subject"),e.k0s(),e.j41(4,"button",2),e.EFF(5,"Back to List"),e.k0s()(),e.j41(6,"form",3),e.bIt("ngSubmit",function(){return i.submit()}),e.j41(7,"div",4)(8,"h3"),e.EFF(9,"Basic Information"),e.k0s(),e.j41(10,"div",5)(11,"div",6)(12,"label",7),e.EFF(13,"Subject Name *"),e.k0s(),e.nrm(14,"input",8),e.DNE(15,G,2,0,"div",9),e.k0s()(),e.j41(16,"div",5)(17,"div",6)(18,"label",10),e.EFF(19,"Term *"),e.k0s(),e.j41(20,"select",11)(21,"option",12),e.EFF(22,"-- Select Term --"),e.k0s(),e.Z7z(23,x,2,2,"option",13,e.Vm6),e.k0s(),e.DNE(25,N,2,0,"div",9),e.k0s()(),e.j41(26,"div",5)(27,"div",6)(28,"label",14),e.EFF(29,"Grade Level *"),e.k0s(),e.j41(30,"select",15)(31,"option",12),e.EFF(32,"-- Select Grade Level --"),e.k0s(),e.Z7z(33,M,2,2,"option",13,e.Vm6),e.k0s(),e.DNE(35,U,2,0,"div",9),e.k0s()()(),e.j41(36,"div",16)(37,"button",17),e.EFF(38," Cancel "),e.k0s(),e.j41(39,"button",18),e.DNE(40,X,2,0)(41,V,1,0),e.k0s()()(),e.DNE(42,w,3,0,"div",19),e.k0s()),2&o){let l,a,c,u,d,m;e.R7$(6),e.Y8G("formGroup",i.subjectForm),e.R7$(8),e.AVh("is-invalid",(null==(l=i.subjectForm.get("name"))?null:l.invalid)&&(null==(l=i.subjectForm.get("name"))?null:l.touched)),e.R7$(),e.vxM(null!=(a=i.subjectForm.get("name"))&&a.invalid&&null!=(a=i.subjectForm.get("name"))&&a.touched?15:-1),e.R7$(5),e.AVh("is-invalid",(null==(c=i.subjectForm.get("termId"))?null:c.invalid)&&(null==(c=i.subjectForm.get("termId"))?null:c.touched)),e.R7$(3),e.Dyx(i.terms),e.R7$(2),e.vxM(null!=(u=i.subjectForm.get("termId"))&&u.invalid&&null!=(u=i.subjectForm.get("termId"))&&u.touched?25:-1),e.R7$(5),e.AVh("is-invalid",(null==(d=i.subjectForm.get("gradeLevelId"))?null:d.invalid)&&(null==(d=i.subjectForm.get("gradeLevelId"))?null:d.touched)),e.R7$(3),e.Dyx(i.gradeLevels),e.R7$(2),e.vxM(null!=(m=i.subjectForm.get("gradeLevelId"))&&m.invalid&&null!=(m=i.subjectForm.get("gradeLevelId"))&&m.touched?35:-1),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(2),e.Y8G("disabled",i.subjectForm.invalid||i.loading),e.R7$(),e.vxM(i.loading?40:41),e.R7$(2),e.vxM(i.loading?42:-1)}},dependencies:[r.X1,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}}return n})()},{path:"update/:id",pathMatch:"full",component:(()=>{class n{constructor(t,o,i,l,a){this.fb=t,this.subjectService=o,this.gollegeService=i,this.router=l,this.route=a,this.loading=!1,this.terms=[],this.gradeLevels=[],this.subjectForm=this.fb.group({name:["",r.k0.required],termId:["",r.k0.required],gradeLevelId:["",r.k0.required]})}ngOnInit(){this.subjectId=this.route.snapshot.paramMap.get("id"),this.loadLookups(),this.loadSubject()}loadLookups(){this.gollegeService.getTermList().subscribe({next:t=>this.terms=t.items,error:t=>console.error("Error loading terms",t)}),this.gollegeService.getGradeLevelList("3a1ca04e-c99e-70f6-a15e-190f320e8114").subscribe({next:t=>this.gradeLevels=t.items,error:t=>console.error("Error loading grade levels",t)})}loadSubject(){this.subjectService.get(this.subjectId).subscribe({next:t=>{this.subjectForm.patchValue({name:t.data.name,termId:t.data.termId,gradeLevelId:t.data.gradeLevelId})},error:t=>console.error("Error loading subject",t)})}submit(){if(this.subjectForm.invalid)return;const t=this.subjectForm.value;this.loading=!0,this.subjectService.update(this.subjectId,t).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/subjects"])},error:o=>{this.loading=!1,alert("Error: "+o.message)}})}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(r.ok),e.rXU(j.M),e.rXU(h.Z),e.rXU(p.Ix),e.rXU(p.nX))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-update-subject"]],decls:43,vars:14,consts:[[1,"update-container"],[1,"header"],["type","button","routerLink","/subjects",1,"btn","btn-secondary"],[1,"subject-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Enter subject name",1,"form-control"],[1,"error-message"],["for","termId"],["id","termId","formControlName","termId",1,"form-control"],["value",""],[3,"value"],["for","gradeLevelId"],["id","gradeLevelId","formControlName","gradeLevelId",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/subjects",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading-overlay"],[1,"spinner"],[1,"loading-spinner"]],template:function(o,i){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Update Subject"),e.k0s(),e.j41(4,"button",2),e.EFF(5,"Back to List"),e.k0s()(),e.j41(6,"form",3),e.bIt("ngSubmit",function(){return i.submit()}),e.j41(7,"div",4)(8,"h3"),e.EFF(9,"Basic Information"),e.k0s(),e.j41(10,"div",5)(11,"div",6)(12,"label",7),e.EFF(13,"Subject Name *"),e.k0s(),e.nrm(14,"input",8),e.DNE(15,B,2,0,"div",9),e.k0s()(),e.j41(16,"div",5)(17,"div",6)(18,"label",10),e.EFF(19,"Term *"),e.k0s(),e.j41(20,"select",11)(21,"option",12),e.EFF(22,"-- Select Term --"),e.k0s(),e.Z7z(23,z,2,2,"option",13,g),e.k0s(),e.DNE(25,J,2,0,"div",9),e.k0s()(),e.j41(26,"div",5)(27,"div",6)(28,"label",14),e.EFF(29,"Grade Level *"),e.k0s(),e.j41(30,"select",15)(31,"option",12),e.EFF(32,"-- Select Grade Level --"),e.k0s(),e.Z7z(33,A,2,2,"option",13,g),e.k0s(),e.DNE(35,q,2,0,"div",9),e.k0s()()(),e.j41(36,"div",16)(37,"button",17),e.EFF(38," Cancel "),e.k0s(),e.j41(39,"button",18),e.DNE(40,P,2,0)(41,Z,1,0),e.k0s()()(),e.DNE(42,O,3,0,"div",19),e.k0s()),2&o){let l,a,c,u,d,m;e.R7$(6),e.Y8G("formGroup",i.subjectForm),e.R7$(8),e.AVh("is-invalid",(null==(l=i.subjectForm.get("name"))?null:l.invalid)&&(null==(l=i.subjectForm.get("name"))?null:l.touched)),e.R7$(),e.vxM(null!=(a=i.subjectForm.get("name"))&&a.invalid&&null!=(a=i.subjectForm.get("name"))&&a.touched?15:-1),e.R7$(5),e.AVh("is-invalid",(null==(c=i.subjectForm.get("termId"))?null:c.invalid)&&(null==(c=i.subjectForm.get("termId"))?null:c.touched)),e.R7$(3),e.Dyx(i.terms),e.R7$(2),e.vxM(null!=(u=i.subjectForm.get("termId"))&&u.invalid&&null!=(u=i.subjectForm.get("termId"))&&u.touched?25:-1),e.R7$(5),e.AVh("is-invalid",(null==(d=i.subjectForm.get("gradeLevelId"))?null:d.invalid)&&(null==(d=i.subjectForm.get("gradeLevelId"))?null:d.touched)),e.R7$(3),e.Dyx(i.gradeLevels),e.R7$(2),e.vxM(null!=(m=i.subjectForm.get("gradeLevelId"))&&m.invalid&&null!=(m=i.subjectForm.get("gradeLevelId"))&&m.touched?35:-1),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(2),e.Y8G("disabled",i.subjectForm.invalid||i.loading),e.R7$(),e.vxM(i.loading?40:41),e.R7$(2),e.vxM(i.loading?42:-1)}},dependencies:[r.X1,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD,p.Wk],encapsulation:2})}}return n})()}];let W=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[p.iI.forChild(H),p.iI]})}}return n})(),K=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[v.MD,W]})}}return n})()}}]);