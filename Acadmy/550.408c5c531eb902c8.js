"use strict";(self.webpackChunkAcadmy=self.webpackChunkAcadmy||[]).push([[550],{9550:(ae,O,r)=>{r.r(O),r.d(O,{DEFAULT_TENANT_MANAGEMENT_CREATE_FORM_PROPS:()=>f,DEFAULT_TENANT_MANAGEMENT_EDIT_FORM_PROPS:()=>R,DEFAULT_TENANT_MANAGEMENT_ENTITY_ACTIONS:()=>b,DEFAULT_TENANT_MANAGEMENT_ENTITY_PROPS:()=>v,DEFAULT_TENANT_MANAGEMENT_TOOLBAR_ACTIONS:()=>C,TENANT_MANAGEMENT_CREATE_FORM_PROP_CONTRIBUTORS:()=>_,TENANT_MANAGEMENT_EDIT_FORM_PROP_CONTRIBUTORS:()=>E,TENANT_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS:()=>A,TENANT_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS:()=>M,TENANT_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS:()=>h,TenantManagementExtensionsGuard:()=>D,TenantManagementModule:()=>ne,TenantsComponent:()=>u,tenantManagementExtensionsResolver:()=>B});var l=r(3616),e=r(4438);let U=(()=>{class n{constructor(t){this.restService=t,this.apiName="AbpTenantManagement",this.create=a=>this.restService.request({method:"POST",url:"/api/multi-tenancy/tenants",body:a},{apiName:this.apiName}),this.delete=a=>this.restService.request({method:"DELETE",url:`/api/multi-tenancy/tenants/${a}`},{apiName:this.apiName}),this.deleteDefaultConnectionString=a=>this.restService.request({method:"DELETE",url:`/api/multi-tenancy/tenants/${a}/default-connection-string`},{apiName:this.apiName}),this.get=a=>this.restService.request({method:"GET",url:`/api/multi-tenancy/tenants/${a}`},{apiName:this.apiName}),this.getDefaultConnectionString=a=>this.restService.request({method:"GET",responseType:"text",url:`/api/multi-tenancy/tenants/${a}/default-connection-string`},{apiName:this.apiName}),this.getList=a=>this.restService.request({method:"GET",url:"/api/multi-tenancy/tenants",params:{filter:a.filter,sorting:a.sorting,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName}),this.update=(a,s)=>this.restService.request({method:"PUT",url:`/api/multi-tenancy/tenants/${a}`,body:s},{apiName:this.apiName}),this.updateDefaultConnectionString=(a,s)=>this.restService.request({method:"PUT",url:`/api/multi-tenancy/tenants/${a}/default-connection-string`,params:{defaultConnectionString:s}},{apiName:this.apiName})}static{this.\u0275fac=function(a){return new(a||n)(e.KVO(l.G9T))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var d=r(9862),i=r(5923),T=r(4341),L=r(980),g=r(6354),y=r(8141),F=r(4721),S=r(1998),I=r(9066),j=r(3184),P=r(430);const X=()=>[],V=()=>({value:"T"}),Q=n=>({value:n}),W=n=>({value:n,twoWay:!0}),Y=(n,o,t)=>({providerName:n,providerKey:o,visible:t}),x=n=>({visibleChange:n}),k=(n,o,t)=>({inputs:n,outputs:o,componentKey:t});function K(n,o){if(1&n&&(e.j41(0,"h3"),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,null!=t.selected&&t.selected.id?"AbpTenantManagement::Edit":"AbpTenantManagement::NewTenant")," ")}}function w(n,o){if(1&n){const t=e.RV6();e.j41(0,"form",12),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.save())}),e.nrm(1,"abp-extensible-form",13),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.tenantForm)("validateOnSubmit",!0),e.R7$(),e.Y8G("selectedRecord",t.selected)}}function z(n,o){if(1&n){const t=e.RV6();e.j41(0,"button",14),e.EFF(1),e.nI1(2,"abpLocalization"),e.k0s(),e.j41(3,"abp-button",15),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.save())}),e.EFF(4),e.nI1(5,"abpLocalization"),e.k0s()}if(2&n){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,3,"AbpTenantManagement::Cancel")," "),e.R7$(2),e.Y8G("disabled",null==t.tenantForm?null:t.tenantForm.invalid),e.R7$(),e.JRh(e.bMT(5,5,"AbpTenantManagement::Save"))}}function $(n,o){if(1&n){const t=e.RV6();e.j41(0,"abp-feature-management",16),e.mxI("visibleChange",function(s){e.eBV(t);const p=e.XpG();return e.DH7(p.visibleFeatures,s)||(p.visibleFeatures=s),e.Njj(s)}),e.k0s()}if(2&n){const t=e.XpG();e.R50("visible",t.visibleFeatures),e.Y8G("providerKey",t.providerKey)}}let u=(()=>{class n{constructor(){this.list=(0,e.WQX)(l.aGM),this.confirmationService=(0,e.WQX)(d.td),this.service=(0,e.WQX)(U),this.toasterService=(0,e.WQX)(d.W9),this.fb=(0,e.WQX)(T.ze),this.injector=(0,e.WQX)(e.zZn),this.data={items:[],totalCount:0},this.visibleFeatures=!1,this.modalBusy=!1,this.featureManagementKey="FeatureManagement.FeatureManagementComponent",this.onVisibleFeaturesChange=t=>{this.visibleFeatures=t}}get hasSelectedTenant(){return!!this.selected.id}ngOnInit(){this.hookToQuery()}createTenantForm(){const t=new i.a9(this.injector,this.selected);this.tenantForm=(0,i.uB)(t)}addTenant(){this.selected={},this.createTenantForm(),this.isModalVisible=!0}editTenant(t){this.service.get(t).subscribe(a=>{this.selected=a,this.createTenantForm(),this.isModalVisible=!0})}save(){if(!this.tenantForm.valid||this.modalBusy)return;this.modalBusy=!0;const{id:t}=this.selected;(t?this.service.update(t,{...this.selected,...this.tenantForm.value}):this.service.create(this.tenantForm.value)).pipe((0,L.j)(()=>this.modalBusy=!1)).subscribe(()=>{this.isModalVisible=!1,this.toasterService.success("AbpUi::SavedSuccessfully"),this.list.get()})}delete(t,a){this.confirmationService.warn("AbpTenantManagement::TenantDeletionConfirmationMessage","AbpTenantManagement::AreYouSure",{messageLocalizationParams:[a]}).subscribe(s=>{s===d.m.Status.confirm&&(this.toasterService.success("AbpUi::DeletedSuccessfully"),this.service.delete(t).subscribe(()=>this.list.get()))})}hookToQuery(){this.list.hookToQuery(t=>this.service.getList(t)).subscribe(t=>{this.data=t})}onSharedDatabaseChange(t){t||setTimeout(()=>{const a=document.getElementById("defaultConnectionString");a&&a.focus()},0)}openFeaturesModal(t){this.providerKey=t,setTimeout(()=>{this.visibleFeatures=!0},0)}sort(t){const{prop:a,dir:s}=t.sorts[0];this.list.sortKey=a,this.list.sortOrder=s}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["abp-tenants"]],standalone:!1,features:[e.Jv_([l.aGM,{provide:i.JF,useValue:"TenantManagement.TenantsComponent"}])],decls:17,vars:30,consts:[["abpHeader",""],["abpBody",""],["abpFooter",""],[3,"title","toolbar"],["id","wrapper",1,"card"],[1,"card-body"],["id","data-tables-table-filter",1,"data-tables-filter","mb-3"],[1,"input-group"],["type","search",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[3,"data","recordsTotal","list"],[3,"visibleChange","visible","busy"],["providerName","T",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[3,"ngSubmit","formGroup","validateOnSubmit"],[3,"selectedRecord"],["abpClose","","type","button",1,"btn","btn-outline-primary"],["iconClass","fa fa-check",3,"click","disabled"],["providerName","T",3,"visibleChange","visible","providerKey"]],template:function(a,s){if(1&a){const p=e.RV6();e.j41(0,"abp-page",3),e.nI1(1,"abpLocalization"),e.j41(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"input",8),e.nI1(7,"abpLocalization"),e.mxI("ngModelChange",function(c){return e.eBV(p),e.DH7(s.list.filter,c)||(s.list.filter=c),e.Njj(c)}),e.k0s()()(),e.nrm(8,"abp-extensible-table",9),e.k0s()(),e.j41(9,"abp-modal",10),e.mxI("visibleChange",function(c){return e.eBV(p),e.DH7(s.isModalVisible,c)||(s.isModalVisible=c),e.Njj(c)}),e.DNE(10,K,3,3,"ng-template",null,0,e.C5r)(12,w,2,3,"ng-template",null,1,e.C5r)(14,z,6,7,"ng-template",null,2,e.C5r),e.k0s(),e.DNE(16,$,1,2,"abp-feature-management",11),e.k0s()}2&a&&(e.Y8G("title",e.bMT(1,10,"AbpTenantManagement::Tenants"))("toolbar",s.data.items),e.R7$(6),e.Y8G("placeholder",e.bMT(7,12,"AbpUi::PagerSearch")),e.R50("ngModel",s.list.filter),e.R7$(2),e.Y8G("data",s.data.items||e.lJ4(14,X))("recordsTotal",s.data.totalCount||0)("list",s.list),e.R7$(),e.R50("visible",s.isModalVisible),e.Y8G("busy",s.modalBusy),e.R7$(7),e.Y8G("abpReplaceableTemplate",e.sMw(26,k,e.sMw(20,Y,e.lJ4(15,V),e.eq3(16,Q,s.providerKey),e.eq3(18,W,s.visibleFeatures)),e.eq3(24,x,s.onVisibleFeaturesChange),s.featureManagementKey)))},dependencies:[F.a5,T.qT,T.me,T.BC,T.cb,T.vS,T.j4,l.S02,l.y98,d.Qp,d.zf,d.b6,i.X3,i.XY,S.H1,I.NO,l.aM3],encapsulation:2})}}return n})();const H=i.SY.createMany([{text:"AbpTenantManagement::Edit",action:n=>{n.getInjected(u).editTenant(n.record.id)},permission:"AbpTenantManagement.Tenants.Update"},{text:"AbpTenantManagement::Permission:ManageFeatures",action:n=>{n.getInjected(u).openFeaturesModal(n.record.id)},permission:"AbpTenantManagement.Tenants.ManageFeatures"},{text:"AbpTenantManagement::Delete",action:n=>{n.getInjected(u).delete(n.record.id,n.record.name)},permission:"AbpTenantManagement.Tenants.Delete"}]),J=i.Fh.createMany([{type:"string",name:"name",displayName:"AbpTenantManagement::TenantName",sortable:!0}]),G=i.UW.createMany([{type:"string",name:"name",id:"name",displayName:"AbpTenantManagement::TenantName",validators:()=>[T.k0.required,T.k0.maxLength(256)]},{type:"email",name:"adminEmailAddress",displayName:"AbpTenantManagement::DisplayName:AdminEmailAddress",id:"admin-email-address",validators:()=>[T.k0.required,T.k0.maxLength(256),T.k0.email]},{type:"passwordinputgroup",name:"adminPassword",displayName:"AbpTenantManagement::DisplayName:AdminPassword",id:"admin-password",autocomplete:"new-password",validators:n=>[T.k0.required,...(0,d.kl)({get:n.getInjected})]}]),q=G.slice(0,1),Z=i.KR.createMany([{text:"AbpTenantManagement::NewTenant",action:n=>{n.getInjected(u).addTenant()},permission:"AbpTenantManagement.Tenants.Create",icon:"fa fa-plus"}]),b={"TenantManagement.TenantsComponent":H},C={"TenantManagement.TenantsComponent":Z},v={"TenantManagement.TenantsComponent":J},f={"TenantManagement.TenantsComponent":G},R={"TenantManagement.TenantsComponent":q},A=new e.nKC("TENANT_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS"),h=new e.nKC("TENANT_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS"),M=new e.nKC("TENANT_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS"),_=new e.nKC("TENANT_MANAGEMENT_CREATE_FORM_PROP_CONTRIBUTORS"),E=new e.nKC("TENANT_MANAGEMENT_EDIT_FORM_PROP_CONTRIBUTORS");let D=(()=>{class n{constructor(){this.injector=(0,e.WQX)(e.zZn),this.extensions=(0,e.WQX)(i.yJ)}canActivate(){const t={optional:!0},a=(0,e.WQX)(A,t)||{},s=(0,e.WQX)(h,t)||{},p=(0,e.WQX)(M,t)||{},N=(0,e.WQX)(_,t)||{},c=(0,e.WQX)(E,t)||{};return(0,i.Nl)(this.injector,"TenantManagement").pipe((0,g.T)(m=>({"TenantManagement.TenantsComponent":m.Tenant})),(0,i.p2)(this.injector,"TenantManagement"),(0,y.M)(m=>{(0,i.xB)(this.extensions.entityActions,b,a),(0,i.xB)(this.extensions.toolbarActions,C,s),(0,i.ah)(this.extensions.entityProps,v,m.prop,p),(0,i.ah)(this.extensions.createFormProps,f,m.createForm,N),(0,i.ah)(this.extensions.editFormProps,R,m.editForm,c)}),(0,g.T)(()=>!0))}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}}return n})();const B=()=>{const n=(0,e.WQX)(e.zZn),o=(0,e.WQX)(i.yJ),t={optional:!0},a=(0,e.WQX)(A,t)||{},s=(0,e.WQX)(h,t)||{},p=(0,e.WQX)(M,t)||{},N=(0,e.WQX)(_,t)||{},c=(0,e.WQX)(E,t)||{};return(0,i.Nl)(n,"TenantManagement").pipe((0,g.T)(m=>({"TenantManagement.TenantsComponent":m.Tenant})),(0,i.p2)(n,"TenantManagement"),(0,y.M)(m=>{(0,i.xB)(o.entityActions,b,a),(0,i.xB)(o.toolbarActions,C,s),(0,i.ah)(o.entityProps,v,m.prop,p),(0,i.ah)(o.createFormProps,f,m.createForm,N),(0,i.ah)(o.editFormProps,R,m.editForm,c)}))},ee=[{path:"",redirectTo:"tenants",pathMatch:"full"},{path:"",component:l.Cs_,canActivate:[l.W_R,l.RH_],resolve:[B],children:[{path:"tenants",component:l.yFO,data:{requiredPolicy:"AbpTenantManagement.Tenants",replaceableComponent:{key:"TenantManagement.TenantsComponent",defaultComponent:u}},title:"AbpTenantManagement::Tenants"}]}];let te=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[P.iI.forChild(ee),P.iI]})}}return n})(),ne=(()=>{class n{static forChild(t={}){return{ngModule:n,providers:[{provide:A,useValue:t.entityActionContributors},{provide:h,useValue:t.toolbarActionContributors},{provide:M,useValue:t.entityPropContributors},{provide:_,useValue:t.createFormPropContributors},{provide:E,useValue:t.editFormPropContributors},D]}}static forLazy(t={}){return new l.l37(n.forChild(t))}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[te,F.fs,l.Ui,d.Ts,j.zH,i.U9,S.wq,I.NO]})}}return n})()}}]);