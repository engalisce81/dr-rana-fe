"use strict";(self.webpackChunkAcadmy=self.webpackChunkAcadmy||[]).push([[268],{1268:(A,m,d)=>{d.r(m),d.d(m,{ChapterModule:()=>P});var _=d(177),h=d(430),r=d(4341),t=d(4438),u=d(2572);const f=e=>["/chapters/view",e],g=e=>["/chapters/update",e],b=()=>[],F=(e,a)=>a.id;function v(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",1)(1,"p"),t.EFF(2,"Are you sure you want to delete "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5,"?"),t.k0s(),t.j41(6,"div",9)(7,"button",10),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.cancelDelete())}),t.EFF(8,"No"),t.k0s(),t.j41(9,"button",11),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.deleteChapter())}),t.EFF(10,"Yes"),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(4),t.JRh(n.chapterToDelete.name)}}function k(e,a){1&e&&(t.j41(0,"div",8)(1,"p",12),t.EFF(2,"Loading..."),t.k0s()())}function j(e,a){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.nrm(4,"i",16),t.EFF(5),t.k0s(),t.j41(6,"td",17)(7,"button",18),t.nrm(8,"i",19),t.k0s(),t.j41(9,"button",20),t.nrm(10,"i",21),t.k0s(),t.j41(11,"button",22),t.bIt("click",function(){const o=t.eBV(n).$implicit,s=t.XpG(3);return t.Njj(s.confirmDelete(o))}),t.nrm(12,"i",23),t.k0s()()()}if(2&e){const n=a.$implicit,i=a.$index,o=t.XpG(3);t.R7$(2),t.JRh((o.pageIndex-1)*o.pageSize+i+1),t.R7$(3),t.SpI(" ",n.name," "),t.R7$(2),t.Y8G("routerLink",t.eq3(4,f,n.id)),t.R7$(2),t.Y8G("routerLink",t.eq3(6,g,n.id))}}function E(e,a){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"button",27),t.bIt("click",function(){const o=t.eBV(n).index,s=t.XpG(4);return t.Njj(s.onPageChange(o+1))}),t.EFF(2),t.k0s(),t.bVm()}if(2&e){const n=a.index,i=t.XpG(4);t.R7$(),t.AVh("active",i.pageIndex===n+1),t.R7$(),t.SpI(" ",n+1," ")}}function I(e,a){if(1&e){const n=t.RV6();t.j41(0,"div",15)(1,"button",24),t.bIt("click",function(){t.eBV(n);const o=t.XpG(3);return t.Njj(o.onPageChange(o.pageIndex-1))}),t.EFF(2," Previous "),t.k0s(),t.DNE(3,E,3,3,"ng-container",25),t.j41(4,"button",26),t.bIt("click",function(){t.eBV(n);const o=t.XpG(3);return t.Njj(o.onPageChange(o.pageIndex+1))}),t.EFF(5," Next "),t.k0s()()}if(2&e){const n=t.XpG(3);t.R7$(),t.Y8G("disabled",1===n.pageIndex),t.R7$(2),t.Y8G("ngForOf",t.lJ4(3,b).constructor(n.totalPages)),t.R7$(),t.Y8G("disabled",n.pageIndex===n.totalPages)}}function R(e,a){if(1&e&&(t.j41(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"#"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Name"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Actions"),t.k0s()()(),t.j41(9,"tbody"),t.Z7z(10,j,13,8,"tr",null,F),t.k0s()(),t.DNE(12,I,6,4,"div",15)),2&e){const n=t.XpG(2);t.R7$(10),t.Dyx(n.chapters),t.R7$(2),t.vxM(n.totalCount>n.pageSize?12:-1)}}function $(e,a){1&e&&(t.j41(0,"div",13)(1,"p"),t.EFF(2,"No chapters found."),t.k0s()())}function T(e,a){if(1&e&&t.DNE(0,R,13,1)(1,$,3,0,"div",13),2&e){const n=t.XpG();t.vxM(n.chapters.length>0?0:1)}}let y=(()=>{class e{constructor(n,i){this.chapterService=n,this.router=i,this.chapters=[],this.loading=!1,this.search="",this.totalCount=0,this.pageSize=10,this.pageIndex=1,this.showDeleteConfirm=!1}ngOnInit(){this.loadChapters()}loadChapters(){this.loading=!0,this.chapterService.getList(this.pageIndex,this.pageSize,this.search).subscribe({next:n=>{this.chapters=n.items,this.totalCount=n.totalCount,this.loading=!1},error:()=>this.loading=!1})}onSearchChange(){this.pageIndex=1,this.loadChapters()}onPageChange(n){this.pageIndex=n,this.loadChapters()}confirmDelete(n){this.chapterToDelete=n,this.showDeleteConfirm=!0}cancelDelete(){this.showDeleteConfirm=!1,this.chapterToDelete=null}deleteChapter(){this.chapterToDelete&&this.chapterService.delete(this.chapterToDelete.id).subscribe({next:()=>{this.loadChapters(),this.showDeleteConfirm=!1,this.chapterToDelete=null},error:n=>{console.error("Failed to delete chapter:",n),this.showDeleteConfirm=!1,this.chapterToDelete=null}})}get totalPages(){return Math.ceil(this.totalCount/this.pageSize)}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(u.j),t.rXU(h.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-list-chapter"]],decls:11,vars:4,consts:[[1,"list-container",2,"width","100%"],[1,"delete-confirm-card"],[1,"toolbar"],["type","text","placeholder","Search chapters...",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],["title","Search",1,"btn","btn-search",3,"click"],[1,"bi","bi-search"],["routerLink","/chapters/create","title","Create",1,"btn","btn-success"],[1,"bi","bi-plus-circle","me-1"],[1,"loading-container"],[1,"delete-confirm-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"loading-text"],[1,"no-data-message"],[1,"table",2,"width","100%"],[1,"pagination"],[1,"fas","fa-book-open","me-1"],[1,"actions"],["title","View",1,"btn","btn-view",3,"routerLink"],[1,"bi","bi-eye"],["title","Edit",1,"btn","btn-edit",3,"routerLink"],[1,"bi","bi-pencil"],["title","Delete",1,"btn","btn-delete",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-previous",3,"click","disabled"],[4,"ngFor","ngForOf"],[1,"btn","btn-next",3,"click","disabled"],[1,"btn","btn-page",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0),t.DNE(1,v,11,1,"div",1),t.j41(2,"div",2)(3,"input",3),t.mxI("ngModelChange",function(l){return t.DH7(o.search,l)||(o.search=l),l}),t.bIt("keyup.enter",function(){return o.onSearchChange()}),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return o.onSearchChange()}),t.nrm(5,"i",5),t.k0s(),t.j41(6,"button",6),t.nrm(7,"i",7),t.EFF(8," Create "),t.k0s()(),t.DNE(9,k,3,0,"div",8)(10,T,2,1),t.k0s()),2&i&&(t.R7$(),t.vxM(o.showDeleteConfirm?1:-1),t.R7$(2),t.R50("ngModel",o.search),t.R7$(6),t.vxM(o.loading?9:-1),t.R7$(),t.vxM(o.loading?-1:10))},dependencies:[r.YN,r.me,r.BC,r.vS,h.Wk],encapsulation:2})}}return e})();var C=d(4530);function D(e,a){1&e&&(t.j41(0,"div",9),t.EFF(1," Chapter name is required "),t.k0s())}function x(e,a){if(1&e&&(t.j41(0,"option",13),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.Y8G("value",n.id),t.R7$(),t.JRh(n.name)}}function L(e,a){1&e&&(t.j41(0,"div",9),t.EFF(1," Course is required "),t.k0s())}function S(e,a){1&e&&t.nrm(0,"span",19)}function G(e,a){1&e&&(t.j41(0,"div",18)(1,"div",20),t.EFF(2,"Processing..."),t.k0s()())}function U(e,a){1&e&&(t.j41(0,"div",9),t.EFF(1,"Chapter name is required"),t.k0s())}function M(e,a){if(1&e&&(t.j41(0,"option",13),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.Y8G("value",n.id),t.R7$(),t.JRh(n.name)}}function X(e,a){1&e&&(t.j41(0,"div",9),t.EFF(1,"Course is required"),t.k0s())}function V(e,a){1&e&&(t.nrm(0,"span",18),t.EFF(1," Updating... "))}function w(e,a){1&e&&t.EFF(0," Update Chapter ")}function B(e,a){1&e&&(t.j41(0,"div",17)(1,"div",19),t.EFF(2,"Processing..."),t.k0s()())}const Y=[{path:"",pathMatch:"full",component:y},{path:"create",pathMatch:"full",component:(()=>{class e{constructor(n,i,o,s){this.fb=n,this.chapterService=i,this.courseService=o,this.router=s,this.loading=!1,this.courses=[],this.chapterForm=this.fb.group({name:["",r.k0.required],courseId:["",r.k0.required]})}ngOnInit(){this.loadCourses()}loadCourses(){this.courseService.getCoursesList().subscribe({next:n=>{this.courses=n.items},error:n=>{console.error("Error loading courses",n)}})}submit(){if(this.chapterForm.invalid)return;const n=this.chapterForm.value;this.loading=!0,this.chapterService.create(n).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/chapters"])},error:i=>{this.loading=!1,alert("Error: "+i.message)}})}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(r.ok),t.rXU(u.j),t.rXU(C.f),t.rXU(h.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-create-chapter"]],decls:33,vars:12,consts:[[1,"create-container"],[1,"header"],["type","button","routerLink","/chapters",1,"btn","btn-secondary"],[1,"chapter-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Enter chapter name",1,"form-control"],[1,"error-message"],["for","courseId"],["id","courseId","formControlName","courseId",1,"form-control"],["value",""],[3,"value"],[1,"form-actions"],["type","button","routerLink","/chapters",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"],[1,"loading-spinner"]],template:function(i,o){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Create New Chapter"),t.k0s(),t.j41(4,"button",2),t.EFF(5,"Back to List"),t.k0s()(),t.j41(6,"form",3),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(7,"div",4)(8,"h3"),t.EFF(9,"Basic Information"),t.k0s(),t.j41(10,"div",5)(11,"div",6)(12,"label",7),t.EFF(13,"Chapter Name *"),t.k0s(),t.nrm(14,"input",8),t.DNE(15,D,2,0,"div",9),t.k0s()(),t.j41(16,"div",5)(17,"div",6)(18,"label",10),t.EFF(19,"Course *"),t.k0s(),t.j41(20,"select",11)(21,"option",12),t.EFF(22,"-- Select Course --"),t.k0s(),t.Z7z(23,x,2,2,"option",13,t.Vm6),t.k0s(),t.DNE(25,L,2,0,"div",9),t.k0s()()(),t.j41(26,"div",14)(27,"button",15),t.EFF(28," Cancel "),t.k0s(),t.j41(29,"button",16),t.DNE(30,S,1,0,"span",17),t.EFF(31),t.k0s()()(),t.DNE(32,G,3,0,"div",18),t.k0s()),2&i){let s,l,c,p;t.R7$(6),t.Y8G("formGroup",o.chapterForm),t.R7$(8),t.AVh("is-invalid",(null==(s=o.chapterForm.get("name"))?null:s.invalid)&&(null==(s=o.chapterForm.get("name"))?null:s.touched)),t.R7$(),t.vxM(null!=(l=o.chapterForm.get("name"))&&l.invalid&&null!=(l=o.chapterForm.get("name"))&&l.touched?15:-1),t.R7$(5),t.AVh("is-invalid",(null==(c=o.chapterForm.get("courseId"))?null:c.invalid)&&(null==(c=o.chapterForm.get("courseId"))?null:c.touched)),t.R7$(3),t.Dyx(o.courses),t.R7$(2),t.vxM(null!=(p=o.chapterForm.get("courseId"))&&p.invalid&&null!=(p=o.chapterForm.get("courseId"))&&p.touched?25:-1),t.R7$(2),t.Y8G("disabled",o.loading),t.R7$(2),t.Y8G("disabled",o.chapterForm.invalid||o.loading),t.R7$(),t.Y8G("ngIf",o.loading),t.R7$(),t.SpI(" ",o.loading?"Creating...":"Create Chapter"," "),t.R7$(),t.vxM(o.loading?32:-1)}},dependencies:[r.X1,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD],encapsulation:2})}}return e})()},{path:"update/:id",pathMatch:"full",component:(()=>{class e{constructor(n,i,o,s,l){this.fb=n,this.chapterService=i,this.courseService=o,this.router=s,this.route=l,this.loading=!1,this.courses=[],this.chapterForm=this.fb.group({name:["",r.k0.required],courseId:["",r.k0.required]})}ngOnInit(){this.chapterId=this.route.snapshot.paramMap.get("id"),this.loadCourses(),this.loadChapter()}loadCourses(){this.courseService.getCoursesList().subscribe({next:n=>this.courses=n.items,error:n=>console.error("Error loading courses",n)})}loadChapter(){this.chapterService.get(this.chapterId).subscribe({next:n=>{this.chapterForm.patchValue({name:n.data.name,courseId:n.data.courseId})},error:n=>console.error("Error loading chapter",n)})}submit(){if(this.chapterForm.invalid)return;const n=this.chapterForm.value;this.loading=!0,this.chapterService.update(this.chapterId,n).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/chapters"])},error:i=>{this.loading=!1,alert("Error: "+i.message)}})}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(r.ok),t.rXU(u.j),t.rXU(C.f),t.rXU(h.Ix),t.rXU(h.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-update-chapter"]],decls:33,vars:11,consts:[[1,"update-container"],[1,"header"],["type","button","routerLink","/chapters",1,"btn","btn-secondary"],[1,"chapter-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Enter chapter name",1,"form-control"],[1,"error-message"],["for","courseId"],["id","courseId","formControlName","courseId",1,"form-control"],["value",""],[3,"value"],[1,"form-actions"],["type","button","routerLink","/chapters",1,"btn","btn-secondary",3,"disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading-overlay"],[1,"spinner"],[1,"loading-spinner"]],template:function(i,o){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Update Chapter"),t.k0s(),t.j41(4,"button",2),t.EFF(5,"Back to List"),t.k0s()(),t.j41(6,"form",3),t.bIt("ngSubmit",function(){return o.submit()}),t.j41(7,"div",4)(8,"h3"),t.EFF(9,"Basic Information"),t.k0s(),t.j41(10,"div",5)(11,"div",6)(12,"label",7),t.EFF(13,"Chapter Name *"),t.k0s(),t.nrm(14,"input",8),t.DNE(15,U,2,0,"div",9),t.k0s()(),t.j41(16,"div",5)(17,"div",6)(18,"label",10),t.EFF(19,"Course *"),t.k0s(),t.j41(20,"select",11)(21,"option",12),t.EFF(22,"-- Select Course --"),t.k0s(),t.Z7z(23,M,2,2,"option",13,t.Vm6),t.k0s(),t.DNE(25,X,2,0,"div",9),t.k0s()()(),t.j41(26,"div",14)(27,"button",15),t.EFF(28," Cancel "),t.k0s(),t.j41(29,"button",16),t.DNE(30,V,2,0)(31,w,1,0),t.k0s()()(),t.DNE(32,B,3,0,"div",17),t.k0s()),2&i){let s,l,c,p;t.R7$(6),t.Y8G("formGroup",o.chapterForm),t.R7$(8),t.AVh("is-invalid",(null==(s=o.chapterForm.get("name"))?null:s.invalid)&&(null==(s=o.chapterForm.get("name"))?null:s.touched)),t.R7$(),t.vxM(null!=(l=o.chapterForm.get("name"))&&l.invalid&&null!=(l=o.chapterForm.get("name"))&&l.touched?15:-1),t.R7$(5),t.AVh("is-invalid",(null==(c=o.chapterForm.get("courseId"))?null:c.invalid)&&(null==(c=o.chapterForm.get("courseId"))?null:c.touched)),t.R7$(3),t.Dyx(o.courses),t.R7$(2),t.vxM(null!=(p=o.chapterForm.get("courseId"))&&p.invalid&&null!=(p=o.chapterForm.get("courseId"))&&p.touched?25:-1),t.R7$(2),t.Y8G("disabled",o.loading),t.R7$(2),t.Y8G("disabled",o.chapterForm.invalid||o.loading),t.R7$(),t.vxM(o.loading?30:31),t.R7$(2),t.vxM(o.loading?32:-1)}},dependencies:[r.X1,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD,h.Wk],encapsulation:2})}}return e})()}];let z=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(Y),h.iI]})}}return e})(),P=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[_.MD,z]})}}return e})()}}]);